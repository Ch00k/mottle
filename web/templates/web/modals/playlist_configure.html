{% load static %}
{% load tekore_model_extras %}
<div id="modal" _="on closeModal remove me">
    <div class="modal-underlay" _="on click trigger closeModal"></div>
    <div class="modal-content">
        <label>Playlists watched for new tracks</label>
        {% if watched_playlists %}
            <table class="modal">
                {% for watched_playlist in watched_playlists %}
                    <tr>
                        <td>
                            <a href="{{ watched_playlist | spotify_url }}">{{ watched_playlist.name }}</a>
                        </td>
                        <td>
                            <a href="{{ watched_playlist.owner | spotify_url }}">{{ watched_playlist.owner.display_name }}</a>
                        </td>
                        <td style="display:none;">
                            <input type="hidden" name="watching-playlist-id" value="{{ playlist_id }}">
                        </td>
                        <td>
                            <a href=""
                               hx-delete="{% url 'watch_playlist' watched_playlist.id %}"
                               hx-include="previous input"
                               hx-confirm="Are you sure you want to stop watching playlist {{ playlist.name }}?"
                               hx-target="closest tr"
                               hx-swap="outerHTML"
                               hx-indicator="#spinner">{% include "web/icons/unfollow.html" %}</a>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <p>No playlists watched</p>
        {% endif %}
    </div>
</div>
